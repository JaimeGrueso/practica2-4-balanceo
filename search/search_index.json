{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"practica2-4/","title":"Pr\u00e1ctica 2.4 \u2013 Balanceo de Carga con Proxy Inverso en Nginx","text":""},{"location":"practica2-4/#jaime-grueso-martin","title":"Jaime Grueso Martin","text":""},{"location":"practica2-4/#indice","title":"Indice","text":"<ol> <li>Configuraciones<ol> <li>Nginx Servidor Web 1</li> <li>Nginx Servidor Web 2</li> <li>Nginx Proxy Inverso</li> </ol> </li> <li>Comprobaciones<ol> <li>Comprobaci\u00f3n del balanceo de carga cuando cae un servidor</li> </ol> </li> <li>Cuestiones finales</li> </ol>"},{"location":"practica2-4/#configuraciones","title":"Configuraciones","text":"<p>Se configurarar\u00e1n los servidores web Nginx con dos m\u00e1quinas Debian y se reutilizar\u00e1 el proxy inverso Nginx. </p> <p>Cada servidor web presentar\u00e1 un sitio web espec\u00edfico.</p> <p>El webserver2 deber\u00e1 tener la IP asignada de forma fija mediante la configuraci\u00f3n DHCP.</p> <p>El proxy inverso se configurar\u00e1 para que realice el balanceo de carga.</p> <p>Se realizar\u00e1n las peticiones HTTP desde unl navegador web de nuestra m\u00e1quina anfitriona.</p> <p>Se accder\u00e1 a <code>http://balanceo</code> y se observar\u00e1 que las peticiones, se van repartiendo entre el servidor 1 y el 2.</p>"},{"location":"practica2-4/#nginx-servidor-web-1","title":"Nginx Servidor Web 1","text":"<p>Se configurar\u00e1 la m\u00e1quina debian original como <code>webserver</code>, se har\u00e1 que siga escuchando el puerto 8080 como  anteriormente y se le a\u00f1adir\u00e1 una cabecera.</p> <p></p>"},{"location":"practica2-4/#nginx-servidor-web-2","title":"Nginx Servidor Web 2","text":"<p>Se configurar\u00e1 la m\u00e1quina clonada de la original como <code>webserver2</code>, se cambiar\u00e1 el servername del los arvhivos de configuracion a <code>webserver2</code> y se har\u00e1 que siga escuchando el puerto 8080 y se le a\u00f1adir\u00e1 una cabecera distinta a la que se ha a\u00f1adido en el servidor web 1.</p> <p></p>"},{"location":"practica2-4/#nginx-proxy-inverso","title":"Nginx Proxy Inverso","text":"<p>Se proceder\u00e1 a a configurar el proxy inverso para que realice el reparto de peticiones: En el archivo de configuraci\u00f3n se crear\u00e1 un bloque <code>upstring</code> con un nombre y que englobe  a los dos servidrs web previamente configurados.</p> <p></p> <p>Se modificar\u00e1 tambien el archivo /etc/hosts para a\u00f1adir tambien la ip de la m\u00e1quina clonada.</p> <p></p>"},{"location":"practica2-4/#comprobaciones","title":"Comprobaciones","text":"<p>Se podr\u00e1 seguir accediendo al sitio web sin problemas, si mantenemos pulsado F5, cada vez se cambiar\u00e1 la cabecera del servidor. Primeramente se ha obtenido el siguiente resultado (la cabecera del segundo webserver).</p> <p></p> <p>Y depues se ha obtenido este resultado (la cabecera del primer webserver).</p> <p></p>"},{"location":"practica2-4/#comprobacion-del-balanceo-de-carga-cuando-cae-un-servidor","title":"Comprobaci\u00f3n del Balanceo de Carga Cuando Cae un Servidor","text":"<p>Si se pausa o si deja directamente de funcionar alguno de los dos servidores que se han configurado, las peticiones se env\u00edan al que a\u00fan sigue funcionando.</p> <p></p> <p></p> <p>En este caso, se ha parado el servidor nginx 1 y se ve que se aparece la cabecera que se ha configurado en el servidor nginx 2. Si se hiciera de manera contraria, aparecer\u00eda la cabecera de del servidor nginx 1.</p>"},{"location":"practica2-4/#cuestiones-finales","title":"Cuestiones Finales","text":""},{"location":"practica2-4/#cuestion-1","title":"Cuestion 1","text":"<p>Busca informaci\u00f3n de qu\u00e9 otros m\u00e9todos de balanceo se pueden aplicar con Nginx y describe al menos 3 de ellos.</p> <p>IP Hash: Usa la IP del cliente para asignarlo siempre al mismo servidor, \u00fatil para sesiones persistentes. Sin embargo, puede romper sesiones si el servidor asignado cae.</p> <p>Least Time: Env\u00eda las solicitudes al servidor con el menor tiempo de respuesta, ideal para reducir latencia. Es m\u00e1s complejo de configurar, ya que requiere medici\u00f3n continua del tiempo de respuesta.</p> <p>Random con Peso: Asigna las solicitudes aleatoriamente, pero permite asignar m\u00e1s carga a servidores con mayor capacidad. Es flexible, aunque necesita ajustes manuales si la capacidad de los servidores cambia.</p>"},{"location":"practica2-4/#cuestion-2","title":"Cuestion 2","text":"<p>Para a\u00f1adir dos servidores web adicionales al balanceo de carga en Nginx, edita el archivo de  configuraci\u00f3n y localiza el bloque upstream donde est\u00e1n definidos los servidores actuales.  Agrega los nuevos servidores (backend3.example.com y backend4.example.com) al bloque,  quedando as\u00ed con cuatro servidores en total. Luego, verifica la configuraci\u00f3n ejecutando  <code>sudo nginx -t</code> y aplica los cambios recargando Nginx con sudo systemctl reload nginx.  Esto permitir\u00e1 balancear el tr\u00e1fico entre todos los servidores configurados.</p>"},{"location":"practica2-4/#cuestion-3","title":"Cuestion 3","text":"<p>Se a\u00f1adir\u00e1n cabeceras identificativas a los webserver, se les cambiar\u00e1 el par\u00e1metro <code>server_name</code> en sus respectivos arvhivos de configuraci\u00f3n y se a\u00f1adir\u00e1n las ips de cada webserver a el archivo <code>/etc/hosts</code> de la m\u00e1quina que alberga el proxy y en el archivo de configuracion de este, se a\u00f1adir\u00e1 un bloque upstream con los nombres de los webservers. Por ultimo el <code>proxy_pass</code>, cambiar\u00e1 al nombre que se le haya asignado al bloque upstream.</p>"}]}